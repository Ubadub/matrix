7/6/09
------

Customized grammars from Safiyyah's choices files.
hau, kal, and mal don't validate (but no red stars).

First attempt at loading grammars.

----
ute: 
----

Invalid type ACCUSATIVE
Unifications specified are invalid or do not unify
Type ACCUSATIVE-LEX-RULE has an invalid constraint specification
Invalid type NOMINATIVE
Unifications specified are invalid or do not unify
Type NOMINATIVE-LEX-RULE has an invalid constraint specification
Error: Problems in type file

Repairs:

Changed all instances of "nominative" to "nom" in choices
file, and all instances of "accusative" to "acc".  Then used
off-line customization system to create grammar.

Next problem:

Error in MOM-SUFFIX-MARKER-LEX-RULE:
  Unification with constraint of TAM failed at path (SYNSEM
                                                     LOCAL
                                                     CONT
                                                     HOOK
                                                     INDEX
                                                     E)

Repairs:

Changed this:

    verb-slot6_morph1_orth=-ku
      verb-slot6_morph1_feat1_name=aspect
      verb-slot6_morph1_feat1_value=mom-plus
      verb-slot6_morph1_feat1_head=verb

to this:

    verb-slot6_morph1_orth=-ku
      verb-slot6_morph1_feat1_name=situation
      verb-slot6_morph1_feat1_value=mom-plus
      verb-slot6_morph1_feat1_head=verb

Next problem:

Undefined wild card `?I' in NON-SINGULAR-SUFFIX
Undefined wild card `?M' in NON-SINGULAR-SUFFIX
Undefined wild card `?I' in NON-SINGULAR-SUFFIX
Nothing following character set character '?' in NON-SINGULAR-SUFFIX
Error: no valid morphological patterns in NON-SINGULAR-SUFFIX: rule-ignored
Undefined wild card `?A' in PLURAL-SUFFIX
Undefined wild card `?M' in PLURAL-SUFFIX
Undefined wild card `?I' in PLURAL-SUFFIX
Nothing following character set character '?' in PLURAL-SUFFIX
Error: no valid morphological patterns in PLURAL-SUFFIX: rule-ignored
Undefined wild card `?A' in PERFECTIVE-MARKER-SUFFIX
Undefined wild card `?K' in PERFECTIVE-MARKER-SUFFIX
Undefined wild card `?U' in PERFECTIVE-MARKER-SUFFIX
Nothing following character set character '?' in PERFECTIVE-MARKER-SUFFIX
Error: no valid morphological patterns in PERFECTIVE-MARKER-SUFFIX: rule-ignored
Undefined wild card `?I' in NEG-SUFFIX-SUFFIX
Nothing following character set character '?' in NEG-SUFFIX-SUFFIX
Error: no valid morphological patterns in NEG-SUFFIX-SUFFIX: rule-ignored

Repairs:

Replaced ? with 7 in choices and test suite file.  Grammar
loads!

Results:

Coverage: 10/27 positive examples, 37%
Overgeneration: 3/30 negative examples, 10%
Error: Unanalyzed lexical items in 26 examples

----
jig:
----

Redundancy involving NON-FEMININE
NON-FEMININE: NEUTER is redundant - it is an ancestor of VEGETABLE 

Repairs:

Changed definition of gender hierarchy to relatively
flat, with fem and non-fem, the latter having subtypes
masc, neut, and veg.

Moved animacy out of gender and made it an "other feature"
with possible values "anim/inam".  

Changed number to sg/non-sg, with du and pl under non-sg.
Some elements specify non-sg, others du, nothing outside
of pronouns direclty says sg, nothing directly says pl.

Initial coverage:  
Coverage: 11/56 36.7%
Overgeneration: 0
Error: 39/56

Problem:

case slot can't take number slot as its input.  Tried fixing this by
adding possible input for noun-slot2 and ran into ?bug with
-lex-rule-dtr being inherited by noun-lex and the subtypes of
noun-lex.

Tried removing this:
  noun-slot1_opt=on

Still having the same error, so trying putting this one back
in and then having noun-slot2 only take noun-slot1 as input.

  noun-slot1_opt=on


also: not getting any parses of verbs without object markers
because subject marker slot isn't available as input for
tense marker.  (Or maybe because object marker isn't optional?)
Try making the tense marker take the subject marker as an
additional possible input, and run into same -lex-rule-dtr
bug.

Not sure why this is working now, but here's the current
state of affairs:

    verb-slot3_input1_type=verb-slot2
    verb-slot3_input2_type=verb-slot1

It doesn't make sense to make the object marker optional,
because it only applies to tverbs as input.

Current competence:
Coverage: 14/30 46.7%
Overgeneration: 3/26 11.5%
Error: 14/56

Next issue:

Missing lexical entry for ngiji/see.  Added like this:

    verb1_stem2_orth=ngiji
    verb1_stem2_pred=_see_v_rel


But that's still not enough. Tried making obj marker (which
apparently comes after the subject marker in these examples)
take subject marker rules as input, but that runs into problems
with the tense lex rules which don't want obj marker input.
... because of this:

    verb-slot3_input1_type=verb-slot2
    verb-slot3_input1_type=verb-slot1

changed to:

    verb-slot3_input1_type=verb-slot2
    verb-slot3_input2_type=verb-slot1

That fixed three errors, all on ungrammatical examples.  In fact,
all remaining errors are on ungrammatical examples, and the changes
noted above also increased ambiguity.  So maybe they are actually
regressions. *** Check this ***

Next issue:

-rni (and probably other case markers) weren't taking
pronouns as input.  Tried fixing like this:

    noun-slot2_input2_type=noun4
    noun-slot2_input3_type=noun5
    noun-slot2_input4_type=noun6
    noun-slot2_input5_type=noun7
    noun-slot2_input6_type=noun8
    noun-slot2_input7_type=noun9
    noun-slot2_input8_type=noun10
    noun-slot2_input9_type=noun11

Competence:

Coverage: 25/30 83.3%
Overgeneration: 6/26 23.1%
Error: 10/56


----
nyn:
----

Cycle involving TRANSITIVE-VERB-LEX

Repairs:

Changed the following:


  verb1_name=transitive -> verb1_name=trans
  verb2_name=intransitive -> verb2_name=intrans

Next problem:

Error: pattern with no affixation ignored in NON-PRESENT-TENSE-PREFIX
Error: no valid morphological patterns in NON-PRESENT-TENSE-PREFIX: rule-ignored

The issue is that there is a slot with no morphemes defined
for it:

  verb-slot2_name=non-present-tense
  verb-slot2_order=before
    verb-slot2_input1_type=verb-slot6
  verb-slot3_name=remote-marker

Safiyyah explained that this was intended to house an empty
morpheme, so I added one.  Also added (per Safiyyah's instructions)
verb-slot3 and verb-slot4 as possible inputs to verb-slot6.

Now the grammar loads without errors!

Results:

Coverage: 0%
Overgeneration: 0%
Errors: 76/81

Repairs:

Added noun type for class 9 and stem for stick.
Fixed _n_rel on _sun_n_rel


SS-think that the grammar is not working because the tense lexical rules are 
incorrect.  As discussed in the meeting, I changed the tense lexical rules so that 
each had an extra rule without a morpheme that marked all the other tenses.

Coverage : 0%
Overgeneration: 0%
Errors: 65/81

Added missing lexical items:
kazi class 1 woman_n_rel
shaija class 1 _man_n_rel
renga intransitive _set_v_rel

Did interactive unification on the first test item and found that the class was that
the subject was marked as plural and the verb agreement marker was singular. 
This was incorrect in the choices file.  Changed

     noun-slot1_morph1_feat2_value=plural
to
     noun-slot1_morph1_feat2_value=singular

Ran grammar again (after deleting the subject-marker-lex-rule from main-verb-lex again)

Coverage: 28.6%
Overgeneration: 3.8%
Errors: 40/81



Found another lexical item that was missing
zaana intransitive _play_v_rel

Well-formed and 0 parses: 12
11 of these grammatical items that are not parsing are not expected to parse given
the current system.

Examples 2 and 3 demonstrate OSV and SOV word orders which are possible in addition
to the standard SVO.  

Examples 12, 13, 14, 15, 16 demonstrate subject dropping.  The reference grammar 
stated that overt pronouns are always emphatic.  Pro-drop is normal, so I did not
include pronouns in the test suite.  (Maybe this should be done for the next go round)

Examples 37 and 40 have non-standard SOV word order to demonstrate the object marker
Object markers do not occur if the direct object follows the verb.

Example 49 was mistakenly labeled as grammatical it was meant to be an ungrammatical 
example demonstrating that the both the main verb and auxliary require subject markers
. I changed this in the test-suite and made a new item  file and placed it in tsdb/skeletons/nyn.

Example 66 demonstrates a form of coordination that the system does not do

Example 50 is the only that that I think the system should be able to handle
The problem is that for the perfect both the aux and the main verb must be marked for 
subject.  The way that the rules are currently set up the main verb is being marked
for univ-present and the aux is marked for continuous-present. I am going to change the rules so that there is one lexeme-to-word rule which will only apply to something that has the modified form or yesterday-past-tense.

Running the grammar again and actually doing interactive unification instead of 
guessing at the problem.  It seems that the aux is not able to take the cont.pres
because it conflicts with the perfective.

Coverage 33%
Overgeneration 3.7 %
Errors 35

Realized that negation morpheme had not been added.  This will account for some of the errors.

  
---
hau
---

Problem:

Cycle involving TRANSITIVE-VERB-LEX

Repairs:

Changed the following:


  verb1_name=transitive -> verb1_name=trans
  verb2_name=intransitive -> verb2_name=intrans

New problem:

Error in 1PL-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (PNG E) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 1S-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (PNG E) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 2FS-COMPLETIVE-TAM-WSP-AUX-LEX:
   No possible type for features (PNG E) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 2MS-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (E PNG) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 2PL-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (PNG E) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 3PL-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (PNG E) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
                                                  INDEX)
Error in 4PL-COMPLETIVE-WSP-TAM-AUX-LEX:
   No possible type for features (E PNG) at path (SYNSEM
                                                  LOCAL
                                                  CAT
                                                  VAL
                                                  COMPS
                                                  FIRST
                                                  LOCAL
                                                  CONT
                                                  HOOK
